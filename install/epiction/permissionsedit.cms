<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <title>Epiction CMS - Edit Permissions (/cms/<?cms write(xmlEscape(get("path"))); ?>)</title>
  <link rel="stylesheet" type="text/css" href="<?cms urlRewrite("/cms/epiction/css/popup.css"); ?>"></link>
  <script language="Javascript" type="text/javascript" src="<?cms urlRewrite("/cms/epiction/js/popup.js"); ?>"></script>
  <script type="text/javascript" language="Javascript">
  <!--
	function actionCancel() {
		window.close();
	}

	function showLoading() {
		var ele = document.getElementById("loading");
		ele.style.display = "block";
	}

	function actionOK() {
		showLoading();
	}

	function setFocus(ele) {
		var ele = document.getElementById(ele);
		ele.focus();
	}

	function setDefaultFocus() {
		setFocus("read");
	}

	window.onload = setDefaultFocus;
  //-->
  </script>
</head>
<body>
  <div id="popupform">
    <form action="<?cms urlRewrite("/cms/epiction/permissionsaddaction.cms"); ?>" method="POST">
	<div id="fields">
	<fieldset id="outer">
	<legend> Edit Permissions </legend>
	<p><span>Group:</span>
	<?cms
		map details;
		int groupid;

		groupid = get("group");

		details = getGroupDetails(groupid);

		writeln(xmlEscape(details["groupName"]));
	?>
	</p>
	<p><span>Permissions:</span>
	<?cms
		int groupid;
		string path;
		map bits;

		path = get("path");
		groupid = get("group");

		bits = getPermissionBits(path, groupid);

		if (bits["read"]) {
			writeln(" <input type=\"checkbox\" name=\"read\" id=\"read\" checked=\"checked\"/> Read");
		} else {
			writeln(" <input type=\"checkbox\" name=\"read\" id=\"read\"/> Read");
		}
		if (bits["write"]) {
			writeln(" <input type=\"checkbox\" name=\"write\" id=\"write\" checked=\"checked\"/> Write");
		} else {
			writeln(" <input type=\"checkbox\" name=\"write\" id=\"write\"/> Write");
		}
		if (bits["execute"]) {
			writeln(" <input type=\"checkbox\" name=\"execute\" id=\"execute\" checked=\"checked\"/> Execute");
		} else {
			writeln(" <input type=\"checkbox\" name=\"execute\" id=\"execute\"/> Execute");
		}
	?>
	</p>
	<div class="error"><?cms write(xmlEscape(get("error"))); ?></div>
	</fieldset>
	</div>
	<div id="actions">
	<p>
	<input type="hidden" name="path" value="<?cms write(xmlEscape(get("path"))); ?>"/>
	<input type="hidden" name="group" value="<?cms write(xmlEscape(get("group"))); ?>"/>
	<input type="button" class="button" value="Cancel" onclick="actionCancel();"/>
	<input type="submit" class="button" value="OK" onclick="actionOK();"/>
	</p>
	</div>
    </form>
  </div>
  <div id="loading"> <span>Please Wait...</span> </div>
</body>
</html>
